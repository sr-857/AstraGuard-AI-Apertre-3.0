# Default values for AstraGuard Helm chart

# Global settings
global:
  imageRegistry: ""
  imagePullSecrets: []
  storageClass: "standard"

# AstraGuard API settings
astraGuard:
  enabled: true
  image:
    repository: astraguard/astraguard-ai
    tag: "latest"
    pullPolicy: IfNotPresent
  replicaCount: 2
  service:
    type: ClusterIP
    port: 8000
    metricsPort: 9090
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 500m
      memory: 512Mi
  env:
    ENVIRONMENT: production
    LOG_LEVEL: INFO
    ENABLE_JSON_LOGGING: "true"
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# Redis settings
redis:
  enabled: true
  image:
    repository: redis
    tag: "7-alpine"
  service:
    port: 6379
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  persistence:
    enabled: true
    size: 5Gi
  config:
    maxmemory: 512mb
    maxmemoryPolicy: allkeys-lru

# Prometheus settings
prometheus:
  enabled: true
  image:
    repository: prom/prometheus
    tag: "latest"
  service:
    port: 9090
  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi
  persistence:
    enabled: true
    size: 10Gi
  retention:
    time: 7d
  config:
    global:
      scrape_interval: 15s
      evaluation_interval: 15s

# Grafana settings
grafana:
  enabled: true
  image:
    repository: grafana/grafana
    tag: "latest"
  service:
    port: 3000
  adminPassword: "admin"  # Change in production
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  persistence:
    enabled: true
    size: 5Gi
  datasources:
    prometheus:
      url: http://prometheus:9090

# Jaeger settings
jaeger:
  enabled: true
  image:
    repository: jaegertracing/all-in-one
    tag: "latest"
  service:
    port: 16686
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 256Mi
  persistence:
    enabled: true
    size: 10Gi

# Redis Exporter settings
redisExporter:
  enabled: true
  image:
    repository: oliver006/redis_exporter
    tag: "latest"
  service:
    port: 9121
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi

# Node Exporter settings
nodeExporter:
  enabled: true
  image:
    repository: prom/node-exporter
    tag: "latest"
  service:
    port: 9100
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi

# Ingress settings
ingress:
  enabled: true
  className: "nginx"
  hosts:
    - host: astraguard.local
      paths:
        - path: /api
          pathType: Prefix
          service:
            name: astra-guard
            port: 8000
        - path: /grafana
          pathType: Prefix
          service:
            name: grafana
            port: 3000
        - path: /prometheus
          pathType: Prefix
          service:
            name: prometheus
            port: 9090
        - path: /jaeger
          pathType: Prefix
          service:
            name: jaeger
            port: 16686
  tls:
    - secretName: astraguard-tls
      hosts:
        - astraguard.local

# Blue-Green deployment settings
blueGreen:
  enabled: false
  activeColor: blue
  blue:
    tag: "v1.0.0"
  green:
    tag: "v1.1.0"
